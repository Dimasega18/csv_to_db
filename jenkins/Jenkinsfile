pipeline {
    agent any
    environment {
                    dbms = 'postgresql'
                    tbname = 'data_hotel'
                    dbname = 'cobaaja'
                }

    stages {
        stage('Run Python') {
            steps {
                withCredentials([
                    string(credentialsId: 'user', variable: 'USER'),
                    string(credentialsId: 'host', variable: 'HOST'),
                    string(credentialsId: 'password', variable: 'PASS'),
                    string(credentialsId: 'port', variable: 'PORT')
                ])
                sh "python3 -db '${dbms}' -u '${USER}' -hs '${HOST}' -ps '${PASS}' -p '${PORT}' -n '${dbname}' -tbname '${tbname}'"
            }
        }
    }

    post {
        always {
            echo "Ini terus di post"
        }
    }   
}